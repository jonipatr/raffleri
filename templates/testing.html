<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAFFLERi - Testing</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        
        @keyframes countdown {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shuffle {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        
        .spinning {
            animation: spin 1s linear infinite;
        }

        .raffle-spinning {
            animation: spin 1s linear infinite;
        }
        
        .pulsing {
            animation: pulse 0.6s ease-in-out infinite;
        }
        
        .shuffling {
            animation: shuffle 0.3s ease-in-out infinite;
        }
        
        .countdown-animation {
            animation: countdown 0.5s ease-in-out;
        }
        
        .winner-reveal {
            animation: pulse 0.5s ease-in-out 3;
        }
        
        /* Prodiscus-inspired theme */
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
        }
        
        .logo-spin {
            animation: spin 20s linear infinite;
        }
        
        .logo-hover:hover {
            transform: scale(1.1) rotate(5deg);
            transition: transform 0.3s ease;
        }
        
        /* Orange accent colors from Prodiscus */
        .orange-accent {
            color: #f97316; /* Orange-500 */
        }
        
        .orange-bg {
            background-color: #f97316;
        }

        button.orange-bg:disabled {
            background-color: #d1d5db;
            color: #6b7280;
        }

        button.orange-bg:disabled:hover {
            background-color: #d1d5db;
        }
        
        .orange-border {
            border-color: #f97316;
        }
        
        .orange-hover:hover {
            background-color: #ea580c; /* Orange-600 */
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-10">
                <h1 class="text-5xl font-bold text-gray-800 mb-2">RAFFLERi</h1>
                <p class="text-gray-600 text-lg font-medium">Testing Mode</p>
            </div>
            
            <!-- Main Card -->
            <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 mb-6">
                <!-- URL Type Selection -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-semibold mb-2">URL Type</label>
                    <div class="flex gap-6">
                        <label class="flex items-center cursor-pointer">
                            <input 
                                type="radio" 
                                name="url-type" 
                                value="video" 
                                id="url-type-video"
                                class="mr-2 w-4 h-4 text-orange-500 border-gray-300 focus:ring-orange-500"
                                checked
                            />
                            <span class="text-gray-700 font-medium">Video URL</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input 
                                type="radio" 
                                name="url-type" 
                                value="channel" 
                                id="url-type-channel"
                                class="mr-2 w-4 h-4 text-orange-500 border-gray-300 focus:ring-orange-500"
                            />
                            <span class="text-gray-700 font-medium">Channel URL</span>
                        </label>
                    </div>
                </div>
                
                <!-- URL Input -->
                <div class="mb-6">
                    <label for="video-url" id="url-label" class="block text-gray-700 font-semibold mb-2">
                        YouTube Live Stream URL
                    </label>
                    <input 
                        type="text" 
                        id="video-url" 
                        placeholder="https://www.youtube.com/watch?v=..."
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition"
                    />
                    <p class="text-sm text-gray-500 mt-2" id="url-help-text">Enter a URL for an active YouTube live stream</p>
                </div>
                
                <!-- Stream Selection Dropdown (hidden by default) -->
                <div id="stream-selection-container" class="mb-6 hidden">
                    <label for="stream-select" class="block text-gray-700 font-semibold mb-2">
                        Valitse Live Streami
                    </label>
                    <select 
                        id="stream-select" 
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition"
                    >
                        <option value="">Loading streams...</option>
                    </select>
                </div>

                <!-- Channel Stats (hidden by default) -->
                <div id="channel-stats" class="mb-6 hidden">
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700">
                        <p class="font-semibold text-gray-800 mb-2" id="channel-title"></p>
                        <div class="grid grid-cols-2 gap-3 text-center">
                            <div>
                                <p class="text-xs text-gray-500">Tilaajat</p>
                                <p class="font-semibold" id="channel-subscribers">-</p>
                            </div>
                            <div id="channel-podcasts-block">
                                <p class="text-xs text-gray-500">Podcastit</p>
                                <p class="font-semibold" id="channel-podcasts">-</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Run Raffle Button -->
                <button 
                    id="run-raffle-btn"
                    class="w-full py-4 orange-bg orange-hover text-white font-semibold text-lg rounded-lg transition-all shadow-md hover:shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"
                >
                    Run Raffle
                </button>
            </div>
            
            <!-- Animation Container -->
            <div id="animation-container" class="hidden mb-6">
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center">
                    <div id="animation-content" class="flex flex-col items-center justify-center min-h-[200px]">
                        <div id="spinner" class="w-16 h-16 border-4 orange-border border-t-transparent rounded-full spinning mb-4"></div>
                        <img id="raffle-spin-img" src="/static/images/kiekko.png" alt="Raffle spinning" class="hidden mx-auto w-1/3 max-w-xs h-auto opacity-90 mb-4">
                        <p id="animation-text" class="text-2xl font-semibold text-gray-800">Drawing winner...</p>
                    </div>
                </div>
            </div>
            
            <!-- Results Container -->
            <div id="results-container" class="hidden">
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Voittaja!</h2>
                    
                    <div id="winner-display" class="text-center mb-6">
                        <div class="bg-gray-50 border-2 border-gray-200 rounded-xl p-6 mb-4">
                            <p class="text-sm text-gray-600 mb-2">Voittaja</p>
                            <p id="winner-username" class="text-3xl font-bold text-gray-800 mb-4"></p>
                            <div id="winner-comment" class="mt-4 pt-4 border-t border-gray-300">
                                <p class="text-xs text-gray-500 mb-2">Voittava kommentti:</p>
                                <p id="winner-comment-text" class="text-lg text-gray-700 italic"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="stats" class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Kommentteja yhteens√§</p>
                            <p id="total-entries" class="text-2xl font-bold text-gray-800"></p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Osallistujat</p>
                            <p id="total-participants" class="text-2xl font-bold text-gray-800"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Error Container -->
            <div id="error-container" class="hidden">
                <div class="bg-red-50 border-2 border-red-200 rounded-xl p-4">
                    <p id="error-message" class="text-red-800 font-medium"></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer with Logo -->
    <footer class="mt-12 mb-8 text-center">
        <img 
            src="/static/images/discus.png" 
            alt="Prodiscus Logo" 
            class="mx-auto logo-hover"
            style="width: 216px; height: 51px; filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1)); object-fit: contain;"
        />
    </footer>
    
    <script src="/static/js/main.js"></script>
</body>
</html>
