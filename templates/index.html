<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAFFLERi - Weighted Comment Raffle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        
        @keyframes countdown {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shuffle {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        
        .spinning {
            animation: spin 1s linear infinite;
        }
        
        .pulsing {
            animation: pulse 0.6s ease-in-out infinite;
        }
        
        .shuffling {
            animation: shuffle 0.3s ease-in-out infinite;
        }
        
        .countdown-animation {
            animation: countdown 0.5s ease-in-out;
        }
        
        .winner-reveal {
            animation: pulse 0.5s ease-in-out 3;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-5xl font-bold text-white mb-2">RAFFLERi</h1>
                <p class="text-blue-200 text-lg">Weighted Comment Raffle System</p>
            </div>
            
            <!-- Main Card -->
            <div class="bg-white rounded-lg shadow-2xl p-8 mb-6">
                <!-- URL Type Selection -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-semibold mb-2">URL Type</label>
                    <div class="flex gap-6">
                        <label class="flex items-center cursor-pointer">
                            <input 
                                type="radio" 
                                name="url-type" 
                                value="video" 
                                id="url-type-video"
                                class="mr-2"
                                checked
                            />
                            <span class="text-gray-700">Video URL</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input 
                                type="radio" 
                                name="url-type" 
                                value="channel" 
                                id="url-type-channel"
                                class="mr-2"
                            />
                            <span class="text-gray-700">Channel URL</span>
                        </label>
                    </div>
                </div>
                
                <!-- URL Input -->
                <div class="mb-6">
                    <label for="video-url" id="url-label" class="block text-gray-700 font-semibold mb-2">
                        YouTube Live Stream URL
                    </label>
                    <input 
                        type="text" 
                        id="video-url" 
                        placeholder="https://www.youtube.com/watch?v=..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                    <p class="text-sm text-gray-500 mt-2" id="url-help-text">Enter a URL for an active YouTube live stream</p>
                </div>
                
                <!-- Stream Selection Dropdown (hidden by default) -->
                <div id="stream-selection-container" class="mb-6 hidden">
                    <label for="stream-select" class="block text-gray-700 font-semibold mb-2">
                        Select Live Stream
                    </label>
                    <select 
                        id="stream-select" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                        <option value="">Loading streams...</option>
                    </select>
                </div>
                
                <!-- Run Raffle Button -->
                <button 
                    id="run-raffle-btn"
                    class="w-full py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold text-lg rounded-lg hover:from-purple-700 hover:to-blue-700 transition shadow-lg transform hover:scale-105"
                >
                    Run Raffle
                </button>
            </div>
            
            <!-- Animation Container -->
            <div id="animation-container" class="hidden mb-6">
                <div class="bg-white rounded-lg shadow-2xl p-8 text-center">
                    <div id="animation-content" class="flex flex-col items-center justify-center min-h-[200px]">
                        <div id="spinner" class="w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full spinning mb-4"></div>
                        <p id="animation-text" class="text-2xl font-semibold text-gray-700">Drawing winner...</p>
                    </div>
                </div>
            </div>
            
            <!-- Results Container -->
            <div id="results-container" class="hidden">
                <div class="bg-white rounded-lg shadow-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Winner!</h2>
                    
                    <div id="winner-display" class="text-center mb-6">
                        <div class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg p-6 mb-4">
                            <p class="text-sm text-gray-600 mb-2">Winner</p>
                            <p id="winner-username" class="text-3xl font-bold text-gray-800 mb-4"></p>
                            <div id="winner-comment" class="mt-4 pt-4 border-t border-gray-300">
                                <p class="text-xs text-gray-500 mb-2">Winning Comment:</p>
                                <p id="winner-comment-text" class="text-lg text-gray-700 italic"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="stats" class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Total Comments</p>
                            <p id="total-entries" class="text-2xl font-bold text-gray-800"></p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <p class="text-sm text-gray-600 mb-1">Participants</p>
                            <p id="total-participants" class="text-2xl font-bold text-gray-800"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Error Container -->
            <div id="error-container" class="hidden">
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <p id="error-message" class="text-red-800"></p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/js/main.js"></script>
</body>
</html>
